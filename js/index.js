// 乐高课评库常量
const legao = { 
    content : [ 
        `宝贝的课堂表现特别好，在拼搭积木的过程中，还能够自己仔细观察成品，并且自己动手拼搭，观察能力和动手能力都不错，还能够给自己的作品拼出不一样的造型，比较有自己的想法，不错。`,
        `宝贝整堂课都表现得不错，很乖巧，能够积极回答老师的问题，在后面拼搭积木的过程中，也能够认真的观察成品，认真听老师讲课，自己动手一步步地把积木拼好了，很棒，在拼搭的过程中，还学会了固定积木的小技巧，棒棒哒。`,
        `宝贝他的观察能力很好，也很聪明，能够很快知道需要用到什么积木。搭积木的时候，表现的也很好，搭建的速度很快，在等别的小朋友的时候，他能自己根据模型搭出下一步，动手能力很棒哦。`,
        `宝贝在课堂上表现得很好，积极配合老师，回答老师的问题，真棒，另外，宝贝的观察能力和动手能力还是不错的，他能够通过观察成品想象出一个基本的形状，然后有目的地拼出相似的形状出来，当做出来的作品和成品有一些出入时，宝贝在老师的指导下也能够马上纠正过来，棒棒哒`,
        `宝贝很棒，很乖巧，能够积极回答老师的问题，在后面拼搭积木的过程中，也能够认真的观察成品，认真听老师讲课，自己动手一步步地把积木拼好了，很棒，在拼搭的过程中，还学会了固定积木的小技巧，棒棒哒`,
        `宝贝很棒，很乖巧，能够积极回答老师的问题，在拼搭积木的过程中，也能够自己动手一步步做好，非常棒，后面连接平板的时候，能够自己修改不同的积木完成不同的功能，学得很好，棒棒哒，要继续加油.`,
        `宝贝整节课都表现得不错，能够积极回答老师的问题，很乖巧，在拼搭积木的过程中，也能够认真听老师讲课，拼错了能够及时的更正过来，很棒，自己也善于发挥自己的创造力，能够在作品上面加上不同的积木，拼出不一样的造型，很不错.`    
    ],
    head1 : `宝贝今天完成了`,
    head2 : `的作品，课程的目标主要有以下几点：`
}
// kitten课评库常量
const kitten = { 
    content : [ 
        `同学在整节课中表现得特别好，今天是学习新知识，所以他在课堂上听得很认真，也可以看出他很感兴趣，听老师讲解完后，他兴致勃勃地自己开始实践，做得很好，不仅顺利完成了成果，还自己尝试添加了很多自己的内容，很棒。`,
        `同学在课堂上很认真，他会对项目进项思考和实践，同时他也喜欢往项目中添加自己的元素进去，这样很好，会记得更清楚，棒棒哒。`,
        `同学在整节课中表现得特别好，很认真，他善于自己思考问题，老师提出问题之后，他会自己认真地思考，遇到解决不了的问题才会问老师，这样真棒，自己学得也快，记得也快，在错误中学习和成长。`,
        `同学接受新知识的能力很强，能够在老师的指引下正确的使用这些积木，最终完成自己的作品，观察力和动手能力都很不错呀`,
        `同学学得很快，在课堂上认真听老师讲课，积极回答老师的问题，是一个很积极向上的小朋友，值得表扬，继续保持这种积极的学习态度，紧跟老师的步伐`,
        `同学整节课的表现都很不错，他很有自己的想法，是一个特别聪明的孩子，不仅学会了老师教的主要知识，还知道怎么调节编程中的参数，让自己作品更加与众不同，能够举一反三的孩子通常学得更快，棒棒哒！`,
        `同学是一个很乖的小朋友，上课的过程中也没有吵闹，很好地配合老师的教学，积极回答了老师的问题，所以学得很快，是第一个把作品做出来的小朋友哦，真的很棒啊，`,
        `同学在上课的时候很认真很用心地听老师讲课，老师提问题的时候能够积极地回应老师，能够很好地跟上老师的进度。在项目分析的过程中观察得很仔细，能够观察到项目中一些很细微的情况。在项目操作的环节中能够准确找到积木块的位置，并能够较快地完成相应的小功能，有较强的理解能力和动手能力。今天的表现非常地出色啊！`,
        `同学在上课的时候很认真很用心地听老师讲课，遇到老师提问题的时候能够积极地回应老师，而且回答得很正确，很好地跟上老师的步伐，而且整个上课的过程中坐姿都很端正，这点很值得表扬。在项目操作的环节中自己能够独立完成相应的功能，有较强的动手能力和理解能力。今天的表现非常地出色。`,
        `同学在上课的时候很认真很用心地听老师讲课，老师提出问题的时候很积极地举手发言。很好地跟上老师的步伐。秩序感很强，能够很好地遵守课堂的纪律。在项目分析的环节中，观察得很仔细，能够很准确地回答老师提出的问题。在进行项目操作的时候很快就将积木拼接好，完成相应的小功能，操作能力很强。`, 
        `同学在上课的时候很认真很用心地听老师讲课，老师提出问题的时候很积极地举手发言。很好地跟上老师的步伐。对上节课学过的知识记得很清楚，尤其是我们分析项目的时候用到的思维导图。对基本的原理有了基本的了解，特别是重复执行这一个积木。在项目操作的环节中能够将积木拼接好，完成相应的小功能，操作能力很较强。`,
        `同学在上课的时候很认真很用心地听老师讲课，老师提问问题的时候能够积极地回应老师，而且回答得很正确，很好地跟上老师的步伐。在项目演示的环节中能够主动上台演示。在项目操作的环节中自己能够独立完成作品，并且每次都是最快完成的。理解能力很强，能够正确地解释看到现象的原因。今天的表现非常出色啊！`,
        `同学在上课的时候很认真很用心地听老师讲课，老师提问问题的时候能够积极地举手回应老师，能够很好地跟上老师的进度。通过学习之后能够基本了解积木编程的基本知识，在项目操作的环节中能够较快地完成相应的功能，有较强的理解能力。在项目分析的过程中观察得很仔细，能够观察到项目中一些细微的东西。今天的表现非常好啊！`,
        `同学在上课的时候能够认真地听老师讲课，积极地举手回答老师的问题。有很强的动手能力和逻辑思维能力，在项目操作环节中自己能够独立地完成相应的小功能。有很强的创新能力，在完成项目之后还会去进行一些创新，自己将原本的背景音乐换成自己喜欢的音乐。`,
        `同学在上课的时候很认真很用心地听老师讲课，遇到老师提问问题的时候能够积极地回应老师，很好地跟上老师的步伐。理解能力很强，老师讲解完知识之后，在项目操作的环节中自己能够独立完成相应的小功能，而且完成得相当迅速，接收能力非常地好，在项目完成之后可以进行一些相应的扩展来加深难度。今天的表现非常地棒！`,
        `同学在上课的时候能够认真地听老师讲课。思维很活跃，会将老师的一些内容扩展开来，营造出一种很好的课堂氛围。知识很丰富，遇到问题的时候总能正确地回答上。在项目分析的环节中有很强的观察力，能够将项目里一些细微的变化都注意到。`,
    ],
    head1 : `同学今天顺利地完成了本节课`,
    head2 : `的作品，这节课的主要知识点包括：`
}
// python课评库常量
const python = { 
    content : [ 
        `同学今天表现得依旧很好，他上课会认真听讲，不会做其他的事情，有的时候课间休息期间还会认真思考上节课的问题，还是很好学的，在写程序的过程中，遇到了任何问题他也会主动地问老师，很棒，这样学到的才更多。`,
        `同学是一个非常善于主动学习的学生，他会在老师讲课的时候认真思考，同时自己在自己的电脑上面尝试，自己去实践，在实践当中去记忆，这是一个很好的方法，很棒，要继续保持学习的热情哦。`,
        `同学还是很聪明，总是在讲新知识点的时候能够积极主动地去记忆和尝试，很配合老师，非常好，这样学到地知识就更加牢固了，同时他也很有自己的编程想法，很棒.`,
        `同学在课堂上表现得很不错，他是一个很听话的学生，也比较善于思考，在接触新的概念的时候，他都能听得很认真，积极地去思考以及回答问题，很快就学会了一些新方法的基本使用，并且在创作作品的时候，还能够做出难度更高的挑战任务。`,
        `同学的编程思想还是很不错的，在讲授新知识的时候，他还是能够比较轻松地理解，并且根据老师的示范，他也会自己做一遍代码实践，再加上自己的一些思考，这样学习会比较容易获得知识。`
    ],
    head1 : `同学今天顺利完成了`,
    head2 : `中课堂的学习，这节课的主要知识点包括，`
}

const ending = {
    oldStu: '继续加油，老师期待你更好的作品!',
    newStu: '喜欢的话来编程猫，学习更多有趣的知识哦!'
}

const courses = ['乐高', 'kitten', 'python']

/**
 * 课评头部
 * @param {*} name 学生姓名
 * @param {*} title 课程名称
 * @param {*} mode 课程种类，0乐高，1kitten，2python
 */
const get_head = (name, title, mode) => {
    switch(mode) {
        case 0:
            return name + legao.head1 + title + legao.head2;
        case 1:
            return name + kitten.head1 + title + kitten.head2;
        case 2: 
            return name + python.head1 + title + python.head2;
        default:
            return ;
    }
};

/**
 * 课评内容
 * @param {*} name 学生姓名
 * @param {*} mode 课程种类，0乐高，1kitten，2python
 * @param {*} isOld 是否是老学员
 */
const get_content = (name, mode, isOld) => {
    let content = [];
    switch(mode) {
        case 0:
            content = legao.content;
            break;
        case 1:
            content = kitten.content;
            break;
        case 2: 
            content = python.content;
            break;
        default:
            break;
    }
    return name + content[Math.floor(Math.random() * content.length)] + (isOld ? ending.oldStu : ending.newStu);
}

/**
 * 获得课评文本
 * @param {*} stuName 
 * @param {*} courseName 
 * @param {*} courseGoal 
 * @param {*} mode 
 * @param {*} isOld
 */
const get_discuss = (stuName, courseName, courseGoal, mode, isOld) => {
    return get_head(stuName, courseName, mode) + courseGoal + get_content(stuName, mode, isOld);
}

/**
 * 增加学生模块
 * @param {*} ev 
 */
const addStuModule = (ev) => {
    ev = ev || window.event;
    const obj = ev.srcElement || ev.target,
        stus = obj.parentNode.querySelector('.course_stus'),
        stu = document.createElement('div'),
        input = document.createElement('input'),
        label = document.createElement('label');
    stu.className = 'course_module';
    label.innerHTML = `学生姓名${stus.children.length + 1}：`;
    stu.appendChild(label);
    input.type = `text`;
    input.name = `course_stuName`;
    input.placeholder = `请输入学生姓名`;
    stu.appendChild(input);
    stus.appendChild(stu);
}

/**
 * 生成课评
 */
const getCourseDiscuss = () => {
    const formDatas = document.getElementsByClassName('course_form');
    const content = document.getElementById('content');
    for(let i = content.childNodes.length - 1; i >= 0; i--) {
        content.removeChild(content.childNodes[i]);
    }
    for(let i = 0; i < formDatas.length; i++) {
        const formData = formDatas[i],
            courseName = formData.querySelector('input[name="course_name"]').value, // 课程名称
            courseGoal = formData.querySelector('textarea[name="course_goal"]').value,  // 课程目标
            stuNames = formData.querySelectorAll('input[name="course_stuName"]'),
            stus = [];  // 学生姓名数组
        for(let stu of stuNames) {
            const val = stu.value;
            val ? stus.push(val) : '';
        }
        if(!courseName || !courseGoal || stus.length == 0) {
            if(confirm(`${courses[i]}课程名称/课程目的/学生姓名未填, 将不生成该课程课评, 是否确认继续操作`)) {
                continue ;
            }else {
                return;
            }
        }
        const title = document.createElement('h1');
        title.innerHTML = courses[i];
        content.appendChild(title);
        for(let stu of stus) {
            const discuss = document.createElement('p');
            let name = stu, isOld = true;
            if(stu[stu.length - 1] == 0) { 
                name = stu.slice(0, stu.length - 1);
            }else if(stu[stu.length - 1] == 1) {
                name = stu.slice(0, stu.length - 1);
                isOld = false;
            }
            discuss.innerHTML = get_discuss(name, courseName, courseGoal, i, isOld);
            content.appendChild(discuss);
        }
    }
    const date = new Date();
    $("#content").wordExport(`课评-${date.getMonth() + 1}.${date.getDate()}`);
}